find_package(OptiX REQUIRED)

configure_file(static.h.in ${CMAKE_CURRENT_LIST_DIR}/static.h)
set(STATIC_DATA_FILE ${CMAKE_CURRENT_LIST_DIR}/static.h)

if(WIN32)
    add_definitions(-DUNICODE -D_UNICODE)
    add_definitions(-DNOMINMAX)
endif()

set(source_folder src)

file(GLOB_RECURSE ALL_INCLUDE CONFIGURE_DEPENDS "*.h")
file(GLOB_RECURSE ALL_SOURCES CONFIGURE_DEPENDS "*.cpp")
source_group(TREE ${CMAKE_CURRENT_SOURCE_DIR} FILES ${ALL_INCLUDE} ${ALL_SOURCES})

add_subdirectory(common)
add_subdirectory(cuda_util)
add_subdirectory(device)
add_subdirectory(gui)
add_subdirectory(scene)
add_subdirectory(material)
add_subdirectory(optix_util)

set(pupil_optix_root ${CMAKE_CURRENT_SOURCE_DIR})

# executable target
add_subdirectory(path_tracer)
add_subdirectory(ddgi)